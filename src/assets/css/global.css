/**
 * Global Styles - Qwik OnuCall
 * Tailwind CSS v4 + Sistema de Diseño con Dark/Light Mode
 *
 * ARQUITECTURA:
 * 1. Importaciones (Tailwind + Fuentes self-hosted)
 * 2. Reset CSS y Accesibilidad (WCAG 2.1 AA)
 * 3. Variables de Color HSL (Light/Dark Mode)
 * 4. Theme de Tailwind (@theme - colores, fuentes, radius)
 * 5. Componentes Custom (botones, badges, nav-links, dashboard)
 * 6. Animaciones (fade-in para backdrop)
 *
 * [CITE: TAILWIND_QWIK_GUIDE.md - Tailwind v4 CSS-first configuration]
 * [CITE: QUALITY_STANDARDS.md - Performance, WCAG AA, CLS < 0.1]
 *
 * Última limpieza: 17 Feb 2026 - Eliminadas 400+ líneas de código obsoleto
 */

/* ============================================================================
   1. IMPORTACIONES
   ============================================================================ */

@import "tailwindcss";
@import "./poppins.css";
@import "./roboto.css";

/* ============================================================================
   2. RESET CSS Y ACCESIBILIDAD (WCAG 2.1 AA)
   ============================================================================ */

@layer base {
  /* Reset básico */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    font-family: Poppins, system-ui, -apple-system, sans-serif;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    line-height: 1.5;
    margin: 0;
    padding: 0;
  }

  /* WCAG 2.1 AA: Respetar preferencias de movimiento reducido */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* ==========================================================================
     3. VARIABLES DE COLOR (Light/Dark Mode con HSL)
     ========================================================================== */

  /* TEMA LIGHT (Por defecto) */
  :root {
    /* Colores Base */
    --background: 0 0% 100%; /* #ffffff */
    --foreground: 229 33% 15%; /* #1d2033 */

    /* Primary (Azul Onucall) */
    --primary: 211 100% 40%; /* #0056b3 - WCAG AA: 5.2:1 */
    --primary-light: 196 92% 53%; /* #18b6f6 - Hover */
    --primary-foreground: 0 0% 100%;

    /* Secondary (Morado) */
    --secondary: 261 52% 45%; /* #5e2ca5 - WCAG AA: 5.1:1 */
    --secondary-light: 261 85% 73%; /* #ac7ff4 */
    --secondary-foreground: 0 0% 100%;

    /* Accent */
    --accent: 261 85% 73%; /* #ac7ff4 */
    --accent-foreground: 229 33% 15%;

    /* Estados Semánticos (WCAG AA) */
    --success: 142 76% 32%; /* #0f8a3c - WCAG AA: 4.6:1 */
    --success-foreground: 0 0% 100%;

    --error: 0 72% 50%; /* #dc2626 - WCAG AA: 4.5:1 */
    --error-foreground: 0 0% 100%;

    --warning: 38 92% 38%; /* #d97706 - WCAG AA: 4.8:1 */
    --warning-foreground: 0 0% 100%;

    --info: 199 89% 48%; /* #0ea5e9 */
    --info-foreground: 0 0% 100%;

    /* Neutrales */
    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 211 100% 46%;

    /* Aliases (compatibilidad shadcn/Qwik UI) */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --card: 0 0% 100%;
    --card-foreground: 229 33% 15%;

    --popover: 0 0% 100%;
    --popover-foreground: 229 33% 15%;

    /* Radius */
    --radius: 0.5rem;
  }

  /* TEMA DARK */
  .dark {
    --background: 229 33% 8%; /* #0f1116 */
    --foreground: 0 0% 98%; /* #fafafa */

    --primary: 196 92% 53%; /* Azul más brillante */
    --primary-light: 211 100% 46%;
    --primary-foreground: 229 33% 8%;

    --secondary: 261 85% 73%;
    --secondary-light: 261 52% 50%;
    --secondary-foreground: 229 33% 8%;

    --accent: 261 85% 73%;
    --accent-foreground: 229 33% 8%;

    --success: 142 76% 45%;
    --success-foreground: 229 33% 8%;

    --error: 0 84% 65%;
    --error-foreground: 229 33% 8%;

    --warning: 38 92% 55%;
    --warning-foreground: 229 33% 8%;

    --info: 199 89% 55%;
    --info-foreground: 229 33% 8%;

    --muted: 229 33% 12%;
    --muted-foreground: 215 16% 65%;

    --border: 229 33% 20%;
    --input: 229 33% 20%;
    --ring: 196 92% 53%;

    --destructive: 0 84% 65%;
    --destructive-foreground: 229 33% 8%;

    --card: 229 33% 12%;
    --card-foreground: 0 0% 98%;

    --popover: 229 33% 10%;
    --popover-foreground: 0 0% 98%;
  }
}

/* ============================================================================
   4. THEME DE TAILWIND (Conectar variables + Escalas numéricas)
   ============================================================================ */

@theme {
  /* ==========================================================================
     ESCALAS NUMÉRICAS PRIMARY
     Compatible con auth, onboarding, formularios legacy
     ========================================================================== */

  /* Primary (Azul Onucall) */
  --color-primary-50: #f3f6fb;
  --color-primary-100: #e1e8f5;
  --color-primary-200: #c3d1eb;
  --color-primary-300: #95afd9;
  --color-primary-400: #617fbe;
  --color-primary-500: #39549b;
  --color-primary-600: #283d7b;
  --color-primary-700: #1d2d5d;
  --color-primary-800: #141f42;
  --color-primary-900: #0c142b;

  /* ==========================================================================
     COLORES SEMÁNTICOS (Conectar variables HSL con Tailwind)
     bg-background, text-foreground, bg-primary, text-success, etc.
     ========================================================================== */

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-light: hsl(var(--primary-light));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-light: hsl(var(--secondary-light));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-success: hsl(var(--success));
  --color-success-foreground: hsl(var(--success-foreground));

  --color-error: hsl(var(--error));
  --color-error-foreground: hsl(var(--error-foreground));

  --color-warning: hsl(var(--warning));
  --color-warning-foreground: hsl(var(--warning-foreground));

  --color-info: hsl(var(--info));
  --color-info-foreground: hsl(var(--info-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  /* ==========================================================================
     FUENTES (Tailwind v4 syntax)
     ========================================================================== */

  --font-family-sans: Poppins, system-ui, -apple-system, sans-serif;
  --font-family-body: Roboto, system-ui, sans-serif;
  --font-family-mono: "Roboto Mono", ui-monospace, monospace;

  /* ==========================================================================
     BORDER RADIUS
     ========================================================================== */

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

/* ============================================================================
   5. COMPONENTES CUSTOM
   ============================================================================ */

@layer components {
  /* ==========================================================================
     BOTONES - Acciones principales y secundarias
     ========================================================================== */

  /**
   * Botón primario - CTA, Submit
   * Uso: <button class="btn-primary">Crear cuenta</button>
   */
  .btn-primary {
    @apply inline-flex h-12 items-center justify-center rounded-lg bg-primary-600 px-8 text-base font-semibold text-white shadow-md transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 active:scale-[0.98] disabled:cursor-not-allowed disabled:opacity-50;
  }

  /**
   * Botón primario pequeño - Navegación, acciones compactas
   * Uso: <button class="btn-primary-sm">Registrarse</button>
   */
  .btn-primary-sm {
    @apply inline-flex h-9 items-center justify-center rounded-md bg-primary-600 px-4 text-sm font-medium text-white transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2;
  }

  /**
   * Botón secundario - Acciones alternativas (outline)
   * Uso: <button class="btn-secondary">Ver demo</button>
   */
  .btn-secondary {
    @apply inline-flex h-12 items-center justify-center rounded-lg border-2 border-neutral-300 px-8 text-base font-semibold text-neutral-700 transition-colors hover:border-primary-400 hover:text-primary-600 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 active:scale-[0.98];
  }

  /**
   * Botón fantasma - Acciones terciarias (solo texto)
   * Uso: <button class="btn-ghost">Cancelar</button>
   */
  .btn-ghost {
    @apply inline-flex h-10 items-center justify-center rounded-md px-4 text-sm font-medium text-neutral-700 transition-colors hover:bg-neutral-100 hover:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-offset-2;
  }

  /* ==========================================================================
     BADGES - Estados, etiquetas, notificaciones
     ========================================================================== */

  .badge-primary {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-primary-100 text-primary-700;
  }

  .badge-success {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-green-100 text-green-700;
  }

  .badge-warning {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700;
  }

  .badge-error {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-red-100 text-red-700;
  }

  .badge-info {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-blue-100 text-blue-700;
  }

  /* ==========================================================================
     NAVIGATION LINKS - Sidebar, menús
     ========================================================================== */

  /**
   * Link de navegación base
   * Uso: <a class="nav-link">Dashboard</a>
   */
  .nav-link {
    @apply flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors hover:bg-neutral-100 hover:text-neutral-900;
  }

  /**
   * Estado activo del link
   * Uso: <a class="nav-link nav-link-active">Dashboard</a>
   */
  .nav-link-active {
    @apply bg-primary-50 text-primary-700 hover:bg-primary-100;
  }

  /* ==========================================================================
     DASHBOARD FOOTER
     ========================================================================== */

  .dashboard-footer {
    @apply border-t border-border bg-card px-6 py-4 text-sm text-muted-foreground;
  }

  /* ==========================================================================
     SIDEBAR COLLAPSE - Tooltips y transiciones
     ========================================================================== */

  /**
   * Tooltip para iconos en sidebar colapsado
   * Uso: <span class="sidebar-tooltip">Texto</span>
   * Requiere: padre con "group relative"
   */
  .sidebar-tooltip {
    @apply absolute left-full ml-3 top-1/2 -translate-y-1/2 z-50
           px-2.5 py-1.5 rounded-md text-xs font-medium whitespace-nowrap
           bg-foreground text-background
           opacity-0 pointer-events-none
           transition-opacity duration-200
           group-hover:opacity-100;
  }

  /* Flecha del tooltip (CSS puro) */
  .sidebar-tooltip::before {
    content: '';
    @apply absolute right-full top-1/2 -translate-y-1/2
           border-4 border-transparent;
    border-right-color: hsl(var(--foreground));
  }

  /**
   * Label de item que desaparece en collapse
   * Usado por: dashboard-sidebar.tsx
   */
  .sidebar-item-label {
    @apply transition-all duration-300 overflow-hidden whitespace-nowrap;
  }

  /**
   * Badge de notificaciones que se oculta en collapse
   */
  .sidebar-item-badge {
    @apply transition-all duration-300 overflow-hidden;
  }

  /**
   * Backdrop mobile para cerrar sidebar con click fuera
   * Usado por: dashboard-layout.tsx
   */
  .sidebar-backdrop {
    @apply fixed inset-0 z-20 bg-foreground/30 backdrop-blur-sm lg:hidden;
    animation: fade-in 0.2s ease-out;
  }
}

/* ============================================================================
   6. ANIMACIONES
   ============================================================================ */

@layer utilities {
  /**
   * Fade-in animation para backdrop mobile
   * Usado por: .sidebar-backdrop
   */
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fade-in 0.2s ease-out;
  }
}